<!doctype html>
<html>
<head>
<title>Understory Stream</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Faustina&display=swap" rel="stylesheet">
<style>
body {
    background-color: #002b36;
    color: #839496;
    font-family: 'Faustina', sans-serif;
    font-size: 16px;
    margin: 4em auto;
    max-width: 50em; }
img {
    width: 100%; }
a {
    color: #c1d1e7;
    text-decoration: none; }
a:link {
    color: #268bd2; }
a:visited {
    color: #6c71c4; }
a:active {
    color: #dc322f; }
.filler { height: 10em; width: 1em; }
.storyboard { column-count: 2; }
.storyboard img { border: 0; .1em solid #586e75; }
/* section {{ margin: 6em 0; }} */
.character-name { font-weight: bold; }
pre {
    background-color: #073642;
    font-size: .75em;
    margin-left: 4em;
    padding: 1em;
    width: 50em; }
</style>
</head>
<body class=h-entry>
<header>
<h1><a class="p-name u-url" href=/>Understory Stream</a></h1>
<p><small>Last updated <time class=dt-updated
datetime="2021-07-11T00:10:52.947978Z">Jul 11, 2021</time> by <a
class="p-author h-card" href=https://angelogladding.com>Angelo Gladding</a></small></p>
<p class=p-summary>The <a href=https://github.com/canopy/understory>understory</a>
implements IndieWeb technologies. The <a href=https://github.com/canopy/canopy>canopy</a>
uses the understory to provide an easy to use first-class IndieWeb "client".</p>
</header>
<aside>
<a href=#map>Map</a><br>
<a href=#nursery>Nursery</a>
</aside>
<!--nav>
<ul>
    <li><a href=#identity>identity</a></li>
    <li><a href=#content>content</a></li>
    <li><a href=#collaboration>collaboration</a></li>
</ul>
</nav-->
<div class=e-content>
<article>
    <p>This is Alice and Bob using separately mounted IndieWeb applications
    to communicate.</p>
    <nav>
    <ol>
    <li><a href=#claim_your_domain>Claim your domain</a></li><li><a href=#write_down_your_passphrase>Write down your passphrase</a></li><li><a href=#check_your_homepage>Check your homepage</a></li><li><a href=#install_the_liana_browser_extension>Install the Liana Browser Extension</a></li><li><a href=#sign_in_to_each_other's_site>Sign in to each other's site</a></li><li><a href=#signed_in>Signed in</a></li><li><a href=#see_your_reciprocal_relationship_in_your_person_database>See your reciprocal relationship in your person database</a></li><li><a href=#go_to_your_content_pub_for_access_to_posts>Go to your content pub for access to posts</a></li><li><a href=#write_your_first_post>Write your first post</a></li><li><a href=#check_your_received_mentions>Check your received mentions</a></li>
    </ol>
    </nav>
    <section>
    <section id=claim_your_domain><h3>Claim your domain</h3><p>Visit your app's address in a browser to claim it.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/000_Alice_claim_your_domain.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/000_Alice_claim_your_domain.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/000_Bob_claim_your_domain.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/000_Bob_claim_your_domain.png></a></div></section><section id=write_down_your_passphrase><h3>Write down your passphrase</h3><p>Save this somewhere not on your computer.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/001_Alice_write_down_your_passphrase.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/001_Alice_write_down_your_passphrase.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/001_Bob_write_down_your_passphrase.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/001_Bob_write_down_your_passphrase.png></a></div></section><section id=check_your_homepage><h3>Check your homepage</h3><p>You're live!</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/002_Alice_check_your_homepage.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/002_Alice_check_your_homepage.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/002_Bob_check_your_homepage.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/002_Bob_check_your_homepage.png></a></div></section><section id=install_the_liana_browser_extension><h3>Install the Liana Browser Extension</h3><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/003_Alice_install_the_liana_browser_extension.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/003_Alice_install_the_liana_browser_extension.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/003_Bob_install_the_liana_browser_extension.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/003_Bob_install_the_liana_browser_extension.png></a></div></section><section id=><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/004_Alice_.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/004_Alice_.png></a><div class=filler></div></div></section><section id=><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/005_Alice_.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/005_Alice_.png></a><div class=filler></div></div></section><section id=sign_in_to_each_other's_site><h3>Sign in to each other's site</h3><p>When you use IndieAuth to sign in to a friend's website you're going to
            a) confirm that your website is who it says it is and
            b) provide your friend with a secret token for later use.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/006_Alice_sign_in_to_each_other's_site.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/006_Alice_sign_in_to_each_other's_site.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/006_Bob_sign_in_to_each_other's_site.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/006_Bob_sign_in_to_each_other's_site.png></a></div></section><section id=signed_in><h3>Signed in</h3><p>Once signed in you will see private posts.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/007_Alice_signed_in.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/007_Alice_signed_in.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/007_Bob_signed_in.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/007_Bob_signed_in.png></a></div></section><section id=see_your_reciprocal_relationship_in_your_person_database><h3>See your reciprocal relationship in your person database</h3><p>Sign-in based.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/008_Alice_see_your_reciprocal_relationship_in_your_person_database.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/008_Alice_see_your_reciprocal_relationship_in_your_person_database.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/008_Bob_see_your_reciprocal_relationship_in_your_person_database.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/008_Bob_see_your_reciprocal_relationship_in_your_person_database.png></a></div></section><section id=go_to_your_content_pub_for_access_to_posts><h3>Go to your content pub for access to posts</h3><p>All of your content stored in one place, accessible via Micropub.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/009_Alice_go_to_your_content_pub_for_access_to_posts.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/009_Alice_go_to_your_content_pub_for_access_to_posts.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/009_Bob_go_to_your_content_pub_for_access_to_posts.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/009_Bob_go_to_your_content_pub_for_access_to_posts.png></a></div></section><section id=write_your_first_post><h3>Write your first post</h3><p>Use the built-in text editor.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/010_Alice_write_your_first_post.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/010_Alice_write_your_first_post.png></a><div class=filler></div></div></section><section id=><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/011_Alice_.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/011_Alice_.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/011_Bob_.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/011_Bob_.png></a></div></section><section id=check_your_received_mentions><h3>Check your received mentions</h3><p>Mentions from other websites appear here.</p><div class=storyboard><div class=character-name>Alice</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/012_Alice_check_your_received_mentions.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/012_Alice_check_your_received_mentions.png></a><div class=character-name>Bob</div><a href=https://media.githubusercontent.com/media/canopy/understory/main/docs/012_Bob_check_your_received_mentions.png><img src=https://media.githubusercontent.com/media/canopy/understory/main/docs/012_Bob_check_your_received_mentions.png></a></div></section>
    </section>
</article>
<article>
    <h2 id=map>Map</h2>
    <ul>
    <li><span style="display: inline-block; width: 4em;">indieweb</span> Mountable IndieWeb apps and helper functions.</li>
    <li><span style="display: inline-block; width: 4em;">kv</span> An opinionated Redis interface.</li>
    <li><span style="display: inline-block; width: 4em;">mf</span> A Microformats parser and utilities.</li>
    <li><span style="display: inline-block; width: 4em;">mkdn</span> Render formatted plaintext (Markdown) as HTML.</li>
    <li><span style="display: inline-block; width: 4em;">mm</span> Render Python powered string templates.</li>
    <li><span style="display: inline-block; width: 4em;">pkg</span> Tools for metamodern software packaging.</li>
    <li><span style="display: inline-block; width: 4em;">solarized</span> A color palette that adapts to the time of day.</li>
    <li><span style="display: inline-block; width: 4em;">sql</span> An opinionated Pythonic SQLite interface.</li>
    <li><span style="display: inline-block; width: 4em;">src</span> Tools for metamodern software development.</li>
    <li><span style="display: inline-block; width: 4em;">term</span> Tools for a metamodern terminal environment.</li>
    <li><span style="display: inline-block; width: 4em;">uri</span> An intelligent Pythonic URI interface.</li>
    <li><span style="display: inline-block; width: 4em;">web</span> Tools for a metamodern web environment.</li>
    </ul>
</article>
<article>
    <h2 id=nursery>Nursery</h2>
    <p>Clone your empty website repository and descend into it. *If you use a <strong>private</strong> GitHub repository your changes will be deployed through GitHub. If you use a <strong>public</strong> repository your changes will be deployed through PyPI.* </p>
<p>Initialize your project and add understory as a dependency. </p>
<pre>poetry init
poetry add understory</pre>
<p>Create a file <code>site.py</code>: </p>
<pre>from understory import indieweb

app = indieweb.site()</pre>
<p>Add your site's app as an entry point in your <code>pyproject.toml</code>: </p>
<pre>poetry run web install site:app AliceAnderson</pre>
<p>Serve your website locally in development mode: </p>
<pre>poetry run web serve AliceAnderson</pre>
<p>Open <a href="http://localhost:9000">localhost:9000</a> in your browser. </p>
<p><em>Develop.</em> For example, add a custom route: </p>
<pre>import random

@app.route(r"hello")
class SayHello:
    return random.choice(["How you doin'?", "What's happening?", "What's up?"])</pre>
<p>To publish: </p>
<pre>poetry run pkg publish patch</pre>
<p>To deploy: </p>
<pre>poetry run web deploy</pre>
</article>
</div>
<script>
if (window.location.href.startsWith("file:///")) {
  document.querySelectorAll("img").forEach((el) => {
    parts = el.src.split("/")
    el.src = parts[parts.length - 1]
  })
}
</script>
</body>
</html>